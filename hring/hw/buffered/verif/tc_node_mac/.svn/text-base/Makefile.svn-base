# $Id$

TOP_SRC = testbench.v
DEP_SRCS = parameters.v

SRCS = $(TOP_SRC) $(DEP_SRCS)

SRC_DIR = ../../src
DW_DIR = $(SYN_HOME)/dw/sim_ver

VCS_FLAGS = +lint=all,noVCDE +v2k +libext+.v -timescale=1ns/1ns -Mupdate -debug -full64

# DUMP_CTRL may be overidden by script calling this
DUMP_CTRL=
INT_CTRL=

# simv is generated by vcs
all: simv

simv: $(SRCS) $(DUMP_CTRL) $(SRC_DIR)/*.v
	vcs -o simv $(VCS_FLAGS) $(INT_CTRL) -y $(SRC_DIR) -y $(DW_DIR) -y . $(TOP_SRC) $(DUMP_CTRL)

simvfast: $(SRCS) $(DUMP_CTRL) $(SRC_DIR)/*.v
	vcs -o simvfast +rad $(VCS_FLAGS) $(INT_CTRL) -y $(SRC_DIR) -y $(DW_DIR) -y . $(TOP_SRC) $(DUMP_CTRL)

clean:
	rm -rf work simv simvfast simv.daidir simvfast.daidir transcript *.vcd *.vpd ucli.key vcs.key run.args csrc DVEfiles .vcsmx_rebuild *~
